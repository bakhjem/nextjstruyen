{"version":3,"file":"static/webpack/static\\development\\pages\\doc\\[id]\\[chapter].js.a4742cf414b9ab6cc636.hot-update.js","sources":["webpack:///./pages/doc//[chapter].js"],"sourcesContent":["import Layout from '../../../components/MyLayout'\r\nimport 'isomorphic-unfetch'\r\nimport Link from 'next/link'\r\nimport React from 'react'\r\nimport ReactHtmlParser, { processNodes, convertNodeToElement, htmlparser2 } from 'react-html-parser';\r\nimport { Helmet } from 'react-helmet';\r\n\r\nexport default class Chapter extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state ={\r\n            prechap:'',\r\n            nextchap:''\r\n        }\r\n    }\r\n    \r\n    static async getInitialProps(context) {\r\n        // eslint-disable-next-line no-undef\r\n        const { id, chapter } = context.query\r\n        const res = await fetch(`http://3.1.203.88:8001/chapter?novelid=${id}&chapterid=${chapter}`)\r\n        // const res1 = await fetch(`http://3.1.203.88:8001/novel?id=${id}`)\r\n        const json = await res.json()\r\n        // const json1 = await res1.json();\r\n        // let prechap = '', nextchap = ''\r\n        // if (json1.chapterlist.length === 1) {\r\n        //     return { novelchapter: json, prechap: '', nextchap: '' }\r\n        // } else {\r\n        //     for (let i = 0; i < json1.chapterlist.length; i++) {\r\n        //         if (\r\n        //             json.idchapter ===\r\n        //             json1.chapterlist[i].idchapter\r\n        //         ) {\r\n        //             if (i === 0) {\r\n        //                 return { novelchapter: json, prechap: '', nextchap: json1.chapterlist[i + 1].idchapter }\r\n\r\n        //             }\r\n        //             if (i > 0 && i < json1.chapterlist.length - 1) {\r\n        //                 return { novelchapter: json, prechap: json1.chapterlist[i - 1].idchapter, nextchap: json1.chapterlist[i + 1].idchapter }\r\n        //             }\r\n        //             if (i === json1.chapterlist.length - 1) {\r\n        //                 return { novelchapter: json, prechap: json1.chapterlist[i - 1].idchapter, nextchap: '' }\r\n        //             }\r\n        //         }\r\n        //     }\r\n        // }\r\n        // console.log(json)\r\n        return { novelchapter: json }\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if(this.props.novelchapter !== prevProps.novelchapter){\r\n            fetch(`http://3.1.203.88:8001/novel?id=${this.props.novelchapter.idnovels}`)\r\n            .then(r => r.json())\r\n            .then(data => {\r\n                if (data.chapterlist.length === 1) {\r\n                    this.state({prechap:'',nextchap:''})\r\n                } else {\r\n                    for (let i = 0; i < data.chapterlist.length; i++) {\r\n                        if (\r\n                            this.props.novelchapter.idchapter ===\r\n                            data.chapterlist[i].idchapter\r\n                        ) {\r\n                            if (i === 0) {\r\n                                this.setState({prechap:'',nextchap: data.chapterlist[i + 1].idchapter})\r\n                                // return { novelchapter: json, prechap: '', nextchap: json1.chapterlist[i + 1].idchapter }\r\n        \r\n                            }\r\n                            if (i > 0 && i < data.chapterlist.length - 1) {\r\n                                this.setState({prechap:data.chapterlist[i - 1].idchapter,nextchap: data.chapterlist[i + 1].idchapter})\r\n                                // return { novelchapter: json, prechap: json1.chapterlist[i - 1].idchapter, nextchap: json1.chapterlist[i + 1].idchapter }\r\n                            }\r\n                            if (i === data.chapterlist.length - 1) {\r\n                                this.setState({prechap:data.chapterlist[i - 1].idchapter,nextchap:''})\r\n                                // return { novelchapter: json, prechap: json1.chapterlist[i - 1].idchapter, nextchap: '' }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n    \r\n    componentDidMount() {\r\n        fetch(`http://3.1.203.88:8001/novel?id=${this.props.novelchapter.idnovels}`)\r\n            .then(r => r.json())\r\n            .then(data => {\r\n                if (data.chapterlist.length === 1) {\r\n                    this.state({prechap:'',nextchap:''})\r\n                } else {\r\n                    for (let i = 0; i < data.chapterlist.length; i++) {\r\n                        if (\r\n                            this.props.novelchapter.idchapter ===\r\n                            data.chapterlist[i].idchapter\r\n                        ) {\r\n                            if (i === 0) {\r\n                                this.setState({prechap:'',nextchap: data.chapterlist[i + 1].idchapter})\r\n                                // return { novelchapter: json, prechap: '', nextchap: json1.chapterlist[i + 1].idchapter }\r\n        \r\n                            }\r\n                            if (i > 0 && i < data.chapterlist.length - 1) {\r\n                                this.setState({prechap:data.chapterlist[i - 1].idchapter,nextchap: data.chapterlist[i + 1].idchapter})\r\n                                // return { novelchapter: json, prechap: json1.chapterlist[i - 1].idchapter, nextchap: json1.chapterlist[i + 1].idchapter }\r\n                            }\r\n                            if (i === data.chapterlist.length - 1) {\r\n                                this.setState({prechap:data.chapterlist[i - 1].idchapter,nextchap:''})\r\n                                // return { novelchapter: json, prechap: json1.chapterlist[i - 1].idchapter, nextchap: '' }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n    }\r\n    \r\n\r\n    render() {\r\n        console.log(this.props)\r\n        console.log(this.state)\r\n        return (\r\n            <Layout>\r\n                <Helmet>\r\n                    <title>{`Đọc ${this.props.novelchapter.chaptername}`} - YYtruyen</title>\r\n                    <meta name=\"description\" content={`Đọc truyện ${this.props.novelchapter.chaptername} online free tại yytruyen.com, cập nhật các chương mới nhất của truyện này tại đây nhé`} />\r\n                    <meta name=\"theme-color\" content=\"#008f68\" />\r\n                    <meta name=\"keywords\" content=\"đọc truyện online, truyện online, truyện ngôn tình, truyện kiếm hiệp, truyện ngược, sủng\" />\r\n                </Helmet>\r\n                <div className=\"breadcrumb breadcrumbs breadcrumbs_doc\">\r\n                    <div className=\"rdfa-breadcrumb\">\r\n                        <div>\r\n                            <p>\r\n                                <span className=\"breadcrumbs-title\" />\r\n                                <span>\r\n                                    <Link href=\"/\"  >\r\n                                        <a className=\"home\" title=\"Đọc truyện online\">\r\n                                            Đọc truyện online\r\n                    </a>\r\n                                    </Link>\r\n                                </span>\r\n                                <span className=\"separator\">»</span>\r\n                                <span>\r\n                                    <Link\r\n                                        as={`/truyen/${this.props.novelchapter.idnovels}`}\r\n                                        href={`/truyen/[id]`}\r\n                                    >\r\n                                        <a className=\"home\">\r\n                                            {this.props.novelchapter.novelsname}\r\n                                        </a>\r\n                                    </Link>\r\n                                </span>\r\n                                <span className=\"separator\">»</span>{\" \"}\r\n                                {this.props.novelchapter.chaptername}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"menu_doc\" style={{ flexDirection: 'row', padding: 10 }}>\r\n                    <Link\r\n                        as={`/truyen/${this.props.novelchapter.idnovels}`}\r\n                        href={`/truyen?id=${this.props.novelchapter.idnovels}`}>\r\n                        <a style={{ color: 'white' }}>\r\n                            <button color=\"primary\" style={{ margin: 5 }}>\r\n                                Danh sách chương\r\n            </button>\r\n                        </a>\r\n                    </Link>\r\n                    {this.state.prechap !== \"\" && (\r\n                        <Link\r\n\r\n                            // className=\"btn_theodoi btn_doc\"\r\n                            as={`/doc/${this.props.novelchapter.idnovels}/${this.state.prechap}`}\r\n                            href={`/doc/[id]/[chapter]`}\r\n                        >\r\n                            <a rel=\"nofollow\"\r\n                                style={{ color: 'white' }}>\r\n                                <button style={{ margin: 5 }}>\r\n                                    Chương trước\r\n              </button>\r\n                            </a>\r\n                        </Link>\r\n                    )}\r\n                    {this.state.nextchap !== \"\" && (\r\n\r\n                        <Link\r\n\r\n                            // className=\"btn_theodoi btn_doc\"\r\n                            as={`/doc/${this.props.novelchapter.idnovels}/${this.state.nextchap}`}\r\n                            href={`/doc/[id]/[chapter]`}\r\n                        >\r\n                            <a rel=\"nofollow\"\r\n                                style={{ color: 'white' }}>\r\n                                <button color=\"primary\" style={{ margin: 5 }}>\r\n                                    Chương sau\r\n              </button>\r\n                            </a>\r\n                        </Link>\r\n                    )}\r\n                </div>\r\n                <div className=\"hentry\">\r\n                    <h1 className=\"name_chapter entry-title\">{this.props.novelchapter.chaptername}</h1>\r\n                    <div className=\"entry-content\">\r\n                        <div id=\"vung_doc\" className=\"vung_doc\">\r\n                            {this.props.novelchapter.content !== undefined ?\r\n                                ReactHtmlParser(this.props.novelchapter.content)\r\n                                : null\r\n                            }\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div className=\"menu_doc\" style={{ flexDirection: 'row', padding: 10 }}>\r\n                        <Link\r\n                            as={`/truyen/${this.props.novelchapter.idnovels}`}\r\n                            href={`/truyen/[id]`}>\r\n                            <a style={{ color: 'white' }} >\r\n                                <button color=\"primary\" style={{ margin: 5 }}>\r\n                                    Danh sách chương\r\n            </button>\r\n                            </a>\r\n                        </Link>\r\n                        {this.state.prechap !== \"\" && (\r\n                            <Link\r\n\r\n                                // className=\"btn_theodoi btn_doc\"\r\n                                as={`/doc/${this.props.novelchapter.idnovels}/${this.state.prechap}`}\r\n                                href={`/doc/[id]/[chapter]`}\r\n                            >\r\n                                <a rel=\"nofollow\"\r\n                                    style={{ color: 'white' }}>\r\n                                    <button color=\"primary\" style={{ margin: 5 }}>\r\n                                        Chương trước\r\n              </button>\r\n                                </a>\r\n                            </Link>\r\n                        )}\r\n                        {this.state.nextchap !== \"\" && (\r\n\r\n                            <Link\r\n\r\n                                // className=\"btn_theodoi btn_doc\"\r\n                                as={`/doc/${this.props.novelchapter.idnovels}/${this.state.nextchap}`}\r\n                                href={`/doc/[id]/[chapter]`}\r\n                            >\r\n                                <a rel=\"nofollow\"\r\n                                    style={{ color: 'white' }}>\r\n                                    <button color=\"primary\" style={{ margin: 5 }}>\r\n                                        Chương sau\r\n              </button>\r\n                                </a>\r\n                            </Link>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </Layout>\r\n        )\r\n    }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAFA;AAMA;AACA;;;AAiCA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAIA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAIA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AAIA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAGA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAKA;AAAA;AAGA;AACA;AAFA;AAIA;AAAA;AAKA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAFA;AAGA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAMA;AAGA;AACA;AAJA;AAMA;AACA;AAAA;AAAA;AADA;AAEA;AAAA;AAAA;AAAA;AAQA;AAGA;AACA;AAJA;AAMA;AACA;AAAA;AAAA;AADA;AAEA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAFA;AAGA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAMA;AAGA;AACA;AAJA;AAMA;AACA;AAAA;AAAA;AADA;AAEA;AAAA;AAAA;AAAA;AAAA;AAQA;AAGA;AACA;AAJA;AAMA;AACA;AAAA;AAAA;AADA;AAEA;AAAA;AAAA;AAAA;AAAA;AAUA;;;;;;AA3OA;;;;;;;AACA;AACA;;AACA;AACA;;AADA;;AAEA;AACA;;AADA;AAyBA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;AAxCA;AACA;;;;;A","sourceRoot":""}